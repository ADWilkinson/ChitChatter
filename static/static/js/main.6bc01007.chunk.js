(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{209:function(e,t,a){e.exports=a(356)},356:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),s=(a(97),a(137)),i=a(29),l=a(21),u=a.n(l),m=a(27),p=a(28),d=a(38),f=a(6),h=a(18),g=a(133),y=a.n(g),b=Object(h.withStyles)(function(e){return{messages:{overflowY:"auto",minHeight:700,maxHeight:700,overflow:"auto"},log:{overflowY:"auto",minHeight:150,maxHeight:150,overflow:"auto"},card:{minWidth:600,maxWidth:600},subtitle:{fontWeight:"bold",color:"#212e53de",minHeight:"16px",minWidth:"16px",borderRadius:8,padding:"6px 6px 0px 6px",margin:0}}})(function(e){var t=e.classes,a=Object(n.useState)(""),o=Object(d.a)(a,2),c=o[0],s=o[1],i=r.a.createRef(),l=function(){""!==c&&e.sendHandler(c),s(""),u()},u=function(){i.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.d,{id:"endOfChat",className:t.messages},r.a.createElement(f.g,{container:!0,alignContent:"flex-end"},e.messageList(!0)),r.a.createElement("div",{style:{paddingTop:"80px"},ref:i})),r.a.createElement(f.e,null),r.a.createElement(f.g,{container:!0,wrap:"nowrap",justify:"center",style:{margin:12}},r.a.createElement(f.g,{item:!0,xs:10,container:!0,style:{color:"#212e53"},justifty:"center"},r.a.createElement(f.j,{label:"Type a message...",autoFocus:!0,className:t.card,value:c,onChange:function(e){s(e.target.value),u()},onKeyDown:function(e){"enter"===e.key.toLowerCase()&&""!==c&&(l(),e.preventDefault())},InputProps:{disableUnderline:!0}})),r.a.createElement(f.g,{item:!0,xs:2,container:!0,justify:"center"},r.a.createElement(f.b,{style:{color:""===c?"rgba(0,0,0,.2)":"#212e53"},variant:"text",disabled:""===c,onClick:function(){l(),e.forceScroll()}},"Send",r.a.createElement(y.a,{style:{paddingLeft:"6px",color:""===c?"rgba(0,0,0,.2)":"#212e53"}})))),r.a.createElement(f.e,null),r.a.createElement(f.d,{className:t.log},r.a.createElement(f.k,{variant:"body2",className:t.subtitle},"Server Messages"),r.a.createElement(f.k,{style:{color:"#ebaca2",padding:6,margin:2},variant:"caption"},"Type '/help' for information"),r.a.createElement(f.e,null),r.a.createElement(f.g,{container:!0},e.messageList(!1))))}),E=a(5),v=a.n(E),x=a(15),S=function(e,t){switch(t.type){case"SET_CHANNEL":return Object(x.a)({},e,{channel:t.payload.name,channelIndex:t.payload.index});default:return e}},k="SET_USERS_LIST",j="SET_USER_ID",w=function(e,t){switch(t.type){case k:return Object(x.a)({},e,{users:t.payload});case j:return Object(x.a)({},e,{userId:t.payload});default:return e}},O="Global",C="UK",T=[O,C],R="SET_MESSAGE_HISTORY",M="ADD_GLOBAL_MESSAGE",N="ADD_UK_MESSAGE",W=function(e,t){switch(t.type){case R:var a={global:Object(p.a)(t.payload.global),uk:Object(p.a)(t.payload.uk)};return Object(x.a)({},e,{messages:a});case M:var n=Object(p.a)(e.messages.global);return n.push(t.payload),Object(x.a)({},e,{messages:Object(x.a)({},e.messages,{global:n})});case N:var r=Object(p.a)(e.messages.uk);return r.push(t.payload),Object(x.a)({},e,{messages:Object(x.a)({},e.messages,{uk:r})});default:return e}},A=a(134),L=r.a.createContext(),I={channel:O,channelIndex:0,users:[],userId:"",messages:{global:[],uk:[],server:[]}},_=function(e,t){for(var a=null,n=[S,w,W],r=0;r<n.length;r++){var o=(0,n[r])(e,t);Object(A.isEqual)(o,e)||(a=o)}return null!==a?a:e},H=function(e){var t=Object(n.useReducer)(_,I),a=Object(d.a)(t,2),o={state:a[0],dispatch:a[1]};return r.a.createElement(L.Provider,{value:o},e.children)},z=r.a.createContext(),U=function(e){var t={sockets:G()};return r.a.createElement(z.Provider,{value:t},e.children)},G=function e(){var t=T,a=[],n=!0,r=!1,o=void 0;try{for(var c,s=t[Symbol.iterator]();!(n=(c=s.next()).done);n=!0){var i=c.value;console.log("Connecting to channel: ",i);var l=new WebSocket("ws://localhost:8080/ws/"+i);l.onclose=function(){console.dir("Connection to chat server closed, attempting to reconnect..."),setTimeout(function(){e()},1e3)};var u={name:i,socket:l};a.push(u)}}catch(m){r=!0,o=m}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return a},F=Object(h.withStyles)(function(e){return{myMessage:{minHeight:"16px",minWidth:"16px",borderRadius:12,backgroundColor:"#4a919ecf",color:"#fffafa",padding:12,margin:4},notMyMessage:{minHeight:"16px",minWidth:"16px",borderRadius:12,backgroundColor:"#212e53e6",color:"#fffafa",padding:12,margin:4}}})(function(e){var t=e.classes;return r.a.createElement(f.g,{container:!0,item:!0,xs:12,justify:e.author?"flex-end":"flex-start",style:{padding:3}},"SERVER"!==e.authorName&&r.a.createElement(f.g,{item:!0,xs:12},r.a.createElement(f.k,{align:e.author?"right":"left",variant:"caption",style:{color:"#696969",fontWeight:"bold"}},e.authorName)),r.a.createElement(f.g,{item:!0,style:{flexShrink:1}},r.a.createElement(f.k,{variant:"body2",className:e.author?t.myMessage:t.notMyMessage},e.messageContent)))}),D=Object(h.withStyles)(function(e){return{root:{flexGrow:1},content:{flexGrow:1,padding:3*e.spacing.unit},toolbar:e.mixins.toolbar,card:{borderRadius:"20px",border:"solid thin #00000036",minWidth:"50%",maxWidth:"50%"}}})(function(e){var t=e.classes,a=Object(n.useContext)(L),o=a.state,c=a.dispatch,s=Object(n.useContext)(z).sockets,i=Object(n.useState)(0),l=Object(d.a)(i,2),u=l[0],m=l[1];Object(n.useEffect)(function(){setTimeout(function(){h()},400)},[]);var h=function(){var e=document.getElementById("endOfChat");e.scrollTop=e.scrollHeight};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:v()(t.root,t.content,t.toolbar)},r.a.createElement(f.g,{container:!0,justify:"center"},r.a.createElement(f.c,{className:t.card},r.a.createElement(f.a,{position:"static",color:"default"},r.a.createElement(f.i,{value:u,onChange:function(e,t){setTimeout(function(){h()},100),m(t),c({type:"SET_CHANNEL",payload:0===t?{name:O,index:0}:{name:C,index:1}})},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},r.a.createElement(f.h,{label:"Global"}),r.a.createElement(f.h,{label:"United Kingdom"}))),r.a.createElement(b,{forceScroll:h,messageList:function(e){var t;return t=e?(t=o.channel===O?o.messages.global:o.messages.uk).filter(function(e){return"SERVER_MESSAGE"!==e.type}):(t=[].concat(Object(p.a)(o.messages.global),Object(p.a)(o.messages.uk))).filter(function(e){return"SERVER_MESSAGE"===e.type}).reverse(),r.a.createElement(r.a.Fragment,null,t.map(function(e,t){return r.a.createElement(F,{key:t,author:e.userId===o.userId,authorName:e.sender,messageContent:e.message})}))},sendHandler:function(e){var t=s.find(function(e){return e.name===o.channel});""!==e&&t.socket.send(e)},style:{padding:16,margin:16}})))))}),P=Object(h.withStyles)(function(e){return{drawer:{width:240,flexShrink:0,overflowY:"auto"},drawerPaper:{width:240,top:"inherit"},userBar:{color:"#242424e6",padding:"5px",fontWeight:"bold"},toolbar:e.mixins.toolbar}})(function(e){var t,a=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.f,{variant:"permanent",className:a.drawer,classes:{paper:a.drawerPaper}},r.a.createElement("div",{className:a.toolbar}),(t=e.participants,r.a.createElement(f.g,{container:!0},r.a.createElement(f.g,{item:!0,xs:12},r.a.createElement(f.k,{style:{color:"#212e53ed"},align:"center",variant:"h6"},"Users"),r.a.createElement(f.k,{style:{color:0===t.length?"#ebaca2":"#4a919e"},align:"center",variant:"caption"},t.length," total"),r.a.createElement(f.e,{style:{margin:"5px 0px 0px 0px"}})),t.map(function(e,t){return r.a.createElement(f.g,{key:t,item:!0,xs:12},r.a.createElement(f.k,{align:"center",style:{backgroundColor:t%2===0?"#bed3c399":"rgba(74, 145, 158, 0.39)"},variant:"caption",className:a.userBar},e.id))})))))}),V=a(135),B=a(136),K=function(){function e(t){var a=this;Object(V.a)(this,e),this.dispatchAction=function(){var e=Object(m.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.dispatch({type:t,payload:n});case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),this.addMessageToStore=function(){var e=Object(m.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={userId:t.userId,sender:t.sender,channel:t.channel,recipient:t.recipient,message:t.message,timestamp:t.messageTime,type:t.type},t.channel!==O){e.next=4;break}return e.next=4,a.dispatchAction(M,n);case 4:if(t.channel!==C){e.next=7;break}return e.next=7,a.dispatchAction(N,n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.setMessageHistoryToStore=function(){var e=Object(m.a)(u.a.mark(function e(t){var n,r,o,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=[],o=t.recipient,t.messageHistory.forEach(function(e){e.channel===O?n.push({userId:e.userId,sender:e.sender,channel:e.channel,recipient:e.recipient,message:e.message,timestamp:e.messageTime,type:t.type}):e.channel===C&&r.push({userId:e.userId,sender:e.sender,channel:e.channel,recipient:e.recipient,message:e.message,timestamp:e.messageTime,type:t.type})}),c={global:n,uk:r},e.next=7,a.dispatchAction(R,c);case 7:return e.next=9,a.dispatchAction(j,o);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.setUserListToStore=function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.dispatchAction(k,t.participants);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.dispatch=t}return Object(B.a)(e,[{key:"execute",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="USER_MESSAGE"===e.t0?3:"SERVER_MESSAGE"===e.t0?6:"SERVER_UPDATE_MESSAGES"===e.t0?9:"SERVER_UPDATE_USERS"===e.t0?12:15;break;case 3:return e.next=5,this.addMessageToStore(t);case 5:return e.abrupt("break",16);case 6:return e.next=8,this.addMessageToStore(t);case 8:return e.abrupt("break",16);case 9:return e.next=11,this.setMessageHistoryToStore(t);case 11:return e.abrupt("break",16);case 12:return e.next=14,this.setUserListToStore(t);case 14:case 15:return e.abrupt("break",16);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Y=function(){var e=Object(n.useContext)(L),t=e.state,a=e.dispatch,o=Object(n.useContext)(z).sockets,c=new K(a);return Object(n.useEffect)(function(){var e=!0,t=!1,a=void 0;try{for(var n,r=function(){var e=n.value;e.socket.onopen=function(){console.log("Succesfully connected to channel: "+e.name)},e.socket.onerror=function(){console.log("Uh oh... there was an error connected to the chat server")},e.socket.onmessage=function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(t.data),e.next=3,c.execute(a);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},s=o[Symbol.iterator]();!(e=(n=s.next()).done);e=!0)r()}catch(i){t=!0,a=i}finally{try{e||null==s.return||s.return()}finally{if(t)throw a}}},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{participants:t.users}),r.a.createElement(D,{messages:t.messages}))},J=function(e){return r.a.createElement(s.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:Y})))},q=a(62),$=a.n(q),Q=a(94),X=a.n(Q),Z=a(92),ee=a.n(Z),te=a(48),ae=a.n(te),ne=Object(h.createMuiTheme)({palette:{primary:{light:"#ebaca2",main:"#ce6a6b",dark:"#212e53"},secondary:{light:"#bed3c3",main:"#4a919e",dark:"#212e53"},warning:{main:"#ffc071",dark:"#ffb25e"},error:{xLight:ae.a[50],main:ae.a[500],dark:ae.a[700]},success:{xLight:X.a[50],dark:X.a[700]}},typography:{fontFamily:"'Work Sans', sans-serif",fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:700,fontFamilySecondary:"'Roboto Condensed', sans-serif",useNextVariants:!0}}),re={color:ne.palette.text.primary,fontWeight:ne.typography.fontWeightMedium,fontFamily:ne.typography.fontFamilySecondary,textTransform:"uppercase"},oe=Object(x.a)({},ne,{palette:Object(x.a)({},ne.palette,{background:Object(x.a)({},ne.palette.background,{default:"#ebaca217",placeholder:ee.a[200]})}),typography:Object(x.a)({},ne.typography,{fontHeader:re,h1:Object(x.a)({},ne.typography.h1,re,{letterSpacing:0,fontSize:60}),h2:Object(x.a)({},ne.typography.h2,re,{fontSize:48}),h3:Object(x.a)({},ne.typography.h3,re,{fontSize:42}),h4:Object(x.a)({},ne.typography.h4,re,{fontSize:36}),h5:Object(x.a)({},ne.typography.h5,{fontSize:20,fontWeight:ne.typography.fontWeightLight}),h6:Object(x.a)({},ne.typography.h6,re,{fontSize:18}),subtitle1:Object(x.a)({},ne.typography.subtitle1,{fontSize:18}),body1:Object(x.a)({},ne.typography.body2,{fontWeight:ne.typography.fontWeightRegular,fontSize:16}),body2:Object(x.a)({},ne.typography.body1,{fontSize:14})})}),ce=a(61),se=a.n(ce),ie=a(59),le=a.n(ie),ue=a(60),me=a.n(ue),pe=Object(h.withStyles)(function(e){return{topLayer:{zIndex:e.zIndex.drawer+1},title:{fontSize:24},toolbar:{justifyContent:"space-between"},left:{flex:1},leftLinkActive:{color:e.palette.common.white},right:{flex:1,display:"flex",justifyContent:"flex-end"},rightLink:{fontSize:16,color:e.palette.common.white,marginLeft:3*e.spacing.unit},linkSecondary:{color:e.palette.secondary.main}}})(function(e){var t=e.classes;return r.a.createElement(le.a,{position:"static",className:t.topLayer},r.a.createElement(me.a,{className:v()(t.toolbar,t.topLayer)},r.a.createElement("div",{className:t.left}),r.a.createElement(se.a,{variant:"h6",underline:"none",color:"inherit",className:t.title,href:"/"},"ChitChatter"),r.a.createElement("div",{className:t.right})))}),de=function(){return r.a.createElement(h.MuiThemeProvider,{theme:oe},r.a.createElement(H,null,r.a.createElement($.a,null),r.a.createElement("header",null,r.a.createElement(pe,null)),r.a.createElement(U,null,r.a.createElement("main",null,r.a.createElement(J,null))),r.a.createElement("footer",null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},97:function(e,t,a){}},[[209,1,2]]]);
//# sourceMappingURL=main.6bc01007.chunk.js.map